package audit;

import org.junit.BeforeClass;
import org.junit.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import contributor.ContributorPage;
import edition.FormManager;

public class AuditFixTest {
    private static WebDriver driver;
    public FormManager formManager;
    private static ContributorPage contributorPage;


    @BeforeClass

    public static void setUp() throws InterruptedException {
        System.setProperty("webdriver.chrome.driver", "src/test/resources/chromedriver.exe");
        driver = new ChromeDriver();
        driver.get("http://dev.watkins-minerva.com/login");
        FormManager formManager = new FormManager(driver);
        formManager.setField("//*[@id=\"username\"]", "kateryna.ozer@calaton.systems");
        formManager.setField("//*[@id=\"password\"]", "Ks82@vnauhd#a");
        formManager.pressButton("//input[@type='submit']");
        Thread.sleep(60000);

        formManager.pressButton("/html/body/div[1]/div/div/div/form/div/div[1]/div[2]/div[2]/input");
    }

    @Test
    public void AuditErrorTest() {
        int[] editionNumbers = new int[]{11,
                7,
                15,
                4402,
                93,
                4,
                18,
                20,
                436,
                438,
                3,
                1195,
                1201,
                1142,
                1202,
                1208,
                1206,
                1207,
                1211,
                1209,
                1204,
                1210,
                1220,
                1300,
                1254,
                1313,
                1184,
                1183,
                1192,
                1750,
                1659,
                1234,
                1245,
                1246,
                1243,
                1238,
                1252,
                1251,
                1253,
                1260,
                1259,
                1266,
                1264,
                1289,
                1275,
                1274,
                1277,
                1273,
                1285,
                1296,
                1302,
                1297,
                1465,
                1454,
                1323,
                1332,
                1310,
                1476,
                1335,
                1392,
                1322,
                1471,
                1350,
                1387,
                1398,
                1400,
                1257,
                1412,
                1402,
                1408,
                1361,
                1700,
                864,
                1225,
                1379,
                1198,
                1416,
                1339,
                1346,
                1419,
                1794,
                1213,
                1221,
                1886,
                1224,
                1534,
                1215,
                1233,
                1241,
                1291,
                1426,
                1320,
                1414,
                1432,
                1442,
                1449,
                1473,
                1478,
                1474,
                1526,
                1528,
                1529,
                1888,
                1531,
                1383,
                1381,
                1226,
                1367,
                1428,
                1287,
                1375,
                1352,
                1469,
                1377,
                1303,
                1328,
                1415,
                1554,
                1450,
                1360,
                1639,
                1396,
                1043,
                1445,
                1910,
                1508,
                1370,
                1405,
                1580,
                1513,
                1403,
                1411,
                1477,
                1487,
                1342,
                1420,
                1722,
                1609,
                1632,
                1633,
                1490,
                1492,
                1458,
                1460,
                1461,
                1462,
                1623,
                1510,
                1504,
                1304,
                1493,
                1434,
                1552,
                1484,
                1518,
                1311,
                1440,
                1372,
                1363,
                1517,
                1533,
                1563,
                1556,
                1502,
                1498,
                1481,
                1579,
                1834,
                1543,
                1567,
                1624,
                1622,
                1604,
                1611,
                1468,
                1547,
                1467,
                1503,
                1482,
                1651,
                1466,
                1475,
                1447,
                1427,
                1644,
                1620,
                1612,
                1614,
                1603,
                1688,
                1532,
                1546,
                1549,
                1519,
                1536,
                1606,
                1605,
                1496,
                1582,
                1495,
                1548,
                1545,
                1551,
                1497,
                1593,
                1564,
                1557,
                1558,
                1555,
                1553,
                1560,
                1559,
                1572,
                1568,
                1627,
                1575,
                1581,
                1587,
                1586,
                1583,
                1566,
                1570,
                1573,
                1574,
                1598,
                1599,
                1444,
                1630,
                1588,
                1992,
                1640,
                1607,
                1647,
                1590,
                2032,
                857,
                839,
                430,
                58,
                570,
                877,
                495,
                400,
                1578,
                671,
                736,
                1592,
                1596,
                1610,
                673,
                1615,
                1613,
                1618,
                2022,
                1395,
                1628,
                1626,
                1589,
                1621,
                1629,
                1642,
                1641,
                1636,
                1637,
                1649,
                1410,
                2092,
                2212,
                2292,
                2312,
                2062,
                1972,
                2112,
                2122,
                2272,
                2282,
                2332,
                2342,
                2362,
                1683,
                805,
                2372,
                1617,
                1619,
                2382,
                995,
                2232,
                2102,
                2082,
                2142,
                2392,
                1962,
                1786,
                1645,
                2072,
                1561,
                1562,
                2402,
                2412,
                1850,
                937,
                449,
                1652,
                1653,
                1643,
                1648,
                2152,
                2452,
                2462,
                2472,
                2492,
                2502,
                2482,
                2532,
                2542,
                2552,
                2562,
                2582,
                2162,
                2592,
                2602,
                2612,
                2672,
                2682,
                2692,
                2702,
                1638,
                2866,
                2872,
                2900,
                2902,
                2903,
                2905,
                45,
                9,
                14,
                17,
                2893,
                2936,
                6};
        for(int i = 0; i < editionNumbers.length; i++) {
            driver.get("http://dev.watkins-minerva.com/edition/" + editionNumbers[i] + "/audit");
            String status = driver.getPageSource().contains("404") ? " doesn't work" : " works";
            System.out.println("edition " + editionNumbers[i] + status);
        }
    }
}